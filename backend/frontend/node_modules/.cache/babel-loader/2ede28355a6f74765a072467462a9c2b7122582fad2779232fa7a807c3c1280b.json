{"ast":null,"code":"import React,{useEffect}from'react';import{Link,useParams,useLocation,useNavigate}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{Row,Col,Form,ListGroup,Image,Button,Card}from'react-bootstrap';import Message from'../components/Message';import{addToCart,removeFromCart}from'../actions/cartActions';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(){const{id:productId}=useParams();// useParams to get the product ID from the URL\nconst location=useLocation();// useLocation to get the location object\nconst navigate=useNavigate();// useNavigate to replace the history object\nconst qty=location.search?Number(location.search.split('=')[1]):1;const cart=useSelector(state=>state.cart);const{cartItems}=cart;const userLogin=useSelector(state=>state.userLogin);const{userInfo}=userLogin;const dispatch=useDispatch();useEffect(()=>{if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);const removeFromCartHandler=id=>{dispatch(removeFromCart(id));};const checkoutHandler=()=>{if(userInfo){navigate('/shipping');}else{navigate('/login');}};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(Message,{variant:\"info\",children:[\"Your cart is empty \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Back\"})]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(item=>/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:2,children:[\"$\",item.price]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:item.qty,onChange:e=>dispatch(addToCart(item.product,Number(e.target.value))),children:[...Array(item.countInStock).keys()].map(x=>/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1))})}),/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:()=>removeFromCartHandler(item.product),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item.product))}),/*#__PURE__*/_jsx(Col,{})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal (\",cartItems.reduce((acc,item)=>acc+item.qty,0),\") items\"]}),\"$\",cartItems.reduce((acc,item)=>acc+item.qty*item.price,0).toFixed(2)]})}),/*#__PURE__*/_jsx(ListGroup.Item,{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn btn-primary my-2\",disabled:cartItems.length===0,onClick:checkoutHandler,children:\"PROCEED TO CHECKOUT\"})})]})})]});}","map":{"version":3,"names":["React","useEffect","Link","useParams","useLocation","useNavigate","useDispatch","useSelector","Row","Col","Form","ListGroup","Image","Button","Card","Message","addToCart","removeFromCart","jsx","_jsx","jsxs","_jsxs","CartScreen","id","productId","location","navigate","qty","search","Number","split","cart","state","cartItems","userLogin","userInfo","dispatch","removeFromCartHandler","checkoutHandler","children","md","length","variant","to","map","item","Item","src","image","alt","name","fluid","rounded","concat","product","price","Control","as","value","onChange","e","target","Array","countInStock","keys","x","type","onClick","className","reduce","acc","toFixed","disabled"],"sources":["C:/Users/user/Documents/Python/Django-React_Ecommerce/StankinShop/backend/frontend/src/screens/CartScreen.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { Link, useParams, useLocation, useNavigate } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Row, Col, Form, ListGroup, Image, Button, Card } from 'react-bootstrap';\r\nimport Message from '../components/Message';\r\nimport { addToCart, removeFromCart } from '../actions/cartActions';\r\n\r\nexport default function CartScreen() {\r\n  const { id: productId } = useParams(); // useParams to get the product ID from the URL\r\n  const location = useLocation(); // useLocation to get the location object\r\n  const navigate = useNavigate(); // useNavigate to replace the history object\r\n\r\n  const qty = location.search ? Number(location.search.split('=')[1]) : 1;\r\n  const cart = useSelector(state => state.cart)\r\n  const{ cartItems } = cart\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (productId) {\r\n      dispatch(addToCart(productId, qty));\r\n    }\r\n  }, [dispatch, productId, qty]);\r\n\r\n  const removeFromCartHandler = (id) => {\r\n      dispatch(removeFromCart(id))\r\n  };\r\n\r\n  const checkoutHandler = () => {\r\n    if (userInfo) {\r\n        navigate('/shipping');\r\n    } else {\r\n        navigate('/login');\r\n    }\r\n};\r\n\r\n  return (\r\n    <Row>\r\n      <Col md={8}>\r\n        <h1>Shopping Cart</h1>\r\n        {cartItems.length === 0 ? (\r\n          <Message variant='info'>\r\n            Your cart is empty <Link to='/'>Go Back</Link>\r\n          </Message>\r\n        ) : (\r\n            <ListGroup variant='flush'>\r\n                {cartItems.map(item => (\r\n                  <ListGroup.Item key = {item.product}>\r\n                      <Row>\r\n                         <Col md={2}>\r\n                              <Image src={item.image} alt={item.name} fluid rounded/>\r\n                         </Col>\r\n                         <Col md={3}>\r\n                             <Link to={`/product/${item.product}`}>{item.name}</Link>\r\n                         </Col>\r\n                         <Col md={2}>\r\n                            ${item.price}\r\n                         </Col>\r\n                         <Col md={2}>\r\n                         <Form.Control\r\n                          as=\"select\"\r\n                          value={item.qty}\r\n                          onChange={(e) => dispatch(addToCart(item.product, Number(e.target.value)))}\r\n                        >\r\n                          {[...Array(item.countInStock).keys()].map((x) => (\r\n                            <option key={x + 1} value={x + 1}>\r\n                              {x + 1}\r\n                            </option>\r\n                          ))}\r\n                        </Form.Control>\r\n                         </Col>\r\n                         <Col md={1}>\r\n                              <Button \r\n                              type='button' \r\n                              variant='light'\r\n                              onClick={() => removeFromCartHandler(item.product)}>\r\n                                < i className='fas fa-trash'></i>\r\n                              </Button>\r\n                         </Col>\r\n                      </Row>\r\n                  </ListGroup.Item>\r\n                ))}\r\n            </ListGroup>\r\n        )}\r\n      <Col>\r\n\r\n      </Col>\r\n      </Col>\r\n      <Col md={4}>\r\n        <Card>\r\n          <ListGroup variant='flush'>\r\n              <ListGroup.Item>\r\n                  <h2>Subtotal ({cartItems.reduce((acc, item) => acc + item.qty, 0)}) items</h2>\r\n                  ${cartItems.reduce((acc, item) => acc + item.qty * item.price, 0).toFixed(2)}\r\n              </ListGroup.Item>\r\n          </ListGroup>\r\n          <ListGroup.Item className=\"d-flex justify-content-center\">\r\n            <Button \r\n              type='button' \r\n              className='btn btn-primary my-2'\r\n              disabled={cartItems.length === 0}\r\n              onClick={checkoutHandler}\r\n            >\r\n                PROCEED TO CHECKOUT\r\n            </Button>\r\n          </ListGroup.Item>\r\n        </Card>\r\n      </Col>\r\n    </Row>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}